"use strict";var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Array.prototype.forEach||(Array.prototype.forEach=function(t,e){if("function"!=typeof t)throw new TypeError(t+" is not a function");e=e||this;for(var n=0,o=this.length;n!==o;++n)t.call(e,this[n],n,this)}),NodeList.prototype.forEach=Array.prototype.forEach,window.MutationObserver=window.MutationObserver||function(t){function e(t){this.i=[],this.m=t}function n(e){var n,o={type:null,target:null,addedNodes:[],removedNodes:[],previousSibling:null,nextSibling:null,attributeName:null,attributeNamespace:null,oldValue:null};for(n in e)o[n]!==t&&e[n]!==t&&(o[n]=e[n]);return o}function o(e,o){var c=r(e,o);return function(l){var s,d=l.length;o.a&&3===e.nodeType&&e.nodeValue!==c.a&&l.push(new n({type:"characterData",target:e,oldValue:c.a})),o.b&&c.b&&a(l,e,c.b,o.f),(o.c||o.g)&&(s=function(e,o,r,c){function l(t,o,r,i,u){var l,d,f,h=t.length-1;for(u=-~((h-u)/2);f=t.pop();)l=r[f.j],d=i[f.l],c.c&&u&&Math.abs(f.j-f.l)>=h&&(e.push(n({type:"childList",target:o,addedNodes:[l],removedNodes:[l],nextSibling:l.nextSibling,previousSibling:l.previousSibling})),u--),c.b&&d.b&&a(e,l,d.b,c.f),c.a&&3===l.nodeType&&l.nodeValue!==d.a&&e.push(n({type:"characterData",target:l,oldValue:d.a})),c.g&&s(l,d)}function s(o,r){for(var f,h,p,m,b,v=o.childNodes,g=r.c,C=v.length,T=g?g.length:0,y=0,N=0,E=0;N<C||E<T;)m=v[N],b=(p=g[E])&&p.node,m===b?(c.b&&p.b&&a(e,m,p.b,c.f),c.a&&p.a!==t&&m.nodeValue!==p.a&&e.push(n({type:"characterData",target:m,oldValue:p.a})),h&&l(h,o,v,g,y),c.g&&(m.childNodes.length||p.c&&p.c.length)&&s(m,p),N++,E++):(d=!0,f||(f={},h=[]),m&&(f[p=i(m)]||(f[p]=!0,-1===(p=u(g,m,E,"node"))?c.c&&(e.push(n({type:"childList",target:o,addedNodes:[m],nextSibling:m.nextSibling,previousSibling:m.previousSibling})),y++):h.push({j:N,l:p})),N++),b&&b!==v[N]&&(f[p=i(b)]||(f[p]=!0,-1===(p=u(v,b,N))?c.c&&(e.push(n({type:"childList",target:r.node,removedNodes:[b],nextSibling:g[E+1],previousSibling:g[E-1]})),y--):h.push({j:p,l:E})),E++));h&&l(h,o,v,g,y)}var d;return s(o,r),d}(l,e,c,o)),(s||l.length!==d)&&(c=r(e,o))}}function a(e,o,a,r){for(var i,c,u={},l=o.attributes,d=l.length;d--;)c=(i=l[d]).name,r&&r[c]===t||(s(o,i)!==a[c]&&e.push(n({type:"attributes",target:o,attributeName:c,oldValue:a[c],attributeNamespace:i.namespaceURI})),u[c]=!0);for(c in a)u[c]||e.push(n({target:o,type:"attributes",attributeName:c,oldValue:a[c]}))}function r(t,e){var n=!0;return function t(o){var a={node:o};return!e.a||3!==o.nodeType&&8!==o.nodeType?(e.b&&n&&1===o.nodeType&&(a.b=c(o.attributes,function(t,n){return e.f&&!e.f[n.name]||(t[n.name]=s(o,n)),t})),n&&(e.c||e.a||e.b&&e.g)&&(a.c=function(t,e){for(var n=[],o=0;o<t.length;o++)n[o]=e(t[o],o,t);return n}(o.childNodes,t)),n=e.g):a.a=o.nodeValue,a}(t)}function i(t){try{return t.id||(t.mo_id=t.mo_id||d++)}catch(e){try{return t.nodeValue}catch(t){return d++}}}function c(t,e){for(var n={},o=0;o<t.length;o++)n=e(n,t[o],o,t);return n}function u(t,e,n,o){for(;n<t.length;n++)if((o?t[n][o]:t[n])===e)return n;return-1}e._period=30,e.prototype={observe:function(t,n){for(var a={b:!!(n.attributes||n.attributeFilter||n.attributeOldValue),c:!!n.childList,g:!!n.subtree,a:!(!n.characterData&&!n.characterDataOldValue)},r=this.i,i=0;i<r.length;i++)r[i].s===t&&r.splice(i,1);n.attributeFilter&&(a.f=c(n.attributeFilter,function(t,e){return t[e]=!0,t})),r.push({s:t,o:o(t,a)}),this.h||function(t){!function n(){var o=t.takeRecords();o.length&&t.m(o,t),t.h=setTimeout(n,e._period)}()}(this)},takeRecords:function(){for(var t=[],e=this.i,n=0;n<e.length;n++)e[n].o(t);return t},disconnect:function(){this.i=[],clearTimeout(this.h),this.h=null}};var l=document.createElement("i");l.style.top=0;var s=(l="null"!=l.attributes.style.value)?function(t,e){return e.value}:function(t,e){return"style"!==e.name?e.value:t.style.cssText},d=1;return e}(void 0);var ComponentManager={componentCollection:{},instanceCollection:[],plugins:[],init:function(){document.addEventListener("DOMContentLoaded",this.onLoad.bind(this))},onLoad:function(){this.generateComponents(),this.observe()},generateComponents:function(){for(var t in this.componentCollection){var e=this.componentCollection[t].obj,n=this.componentCollection[t].template;this.createAllInstance(e,n)}},observe:function(){var t=this;new MutationObserver(function(e){e.forEach(function(e){e.removedNodes.length&&e.removedNodes.forEach(function(e){if(e.component){e.component.unmounted();for(var n=0;n<t.instanceCollection.length;++n)if(t.instanceCollection[instance]==e.component){t.collection.splice(n,1);break}}}),e.addedNodes.length&&e.addedNodes.forEach(function(e){var n=e.getAttribute(""+Component.CONST.COMPONENT_ATTRIBUTE);if(n){var o=t.componentCollection[n].obj,a=t.componentCollection[n].template;t.createInstance(e,o,a)}})})}).observe(document.body,{childList:!0})},createAllInstance:function(t,e){var n=this;document.querySelectorAll("["+Component.CONST.COMPONENT_ATTRIBUTE+'="'+t.name+'"]').forEach(function(o){n.createInstance(o,t,e)})},createInstance:function(t,e,n){var o=document.querySelector("["+Component.CONST.COMPONENT_ATTRIBUTE+'="'+e.name+'"]['+Component.CONST.TEMPLATE_ATTRIBUTE+"]"),a=o||n,r=new ComponentInstance(t,e.data,e.methods);t.component=r,a&&(t.innerHTML="string"==typeof a?a:a.innerHTML),r.mounted(),r.updated(),this.instanceCollection.push(r)}},Component=function t(e,n){_classCallCheck(this,t),ComponentManager.componentCollection[e.name]={obj:e,template:n}};Component.CONST={COMPONENT_ATTRIBUTE:"data-component",TEMPLATE_ATTRIBUTE:"data-template"};var ComponentInstance=function(){function t(e,n,o){var a=this;if(_classCallCheck(this,t),this.element=e,n){var r=function(t){Object.defineProperty(a,t,{get:function(){return this["_"+t]},set:function(e){this["_"+t]=e,this.updated()}}),a[t]=n[t]};for(var i in n)r(i)}if(o)for(var i in o)this[i]=o[i];ComponentManager.plugins.forEach(function(t){t&&t(a)})}return _createClass(t,[{key:"mounted",value:function(){}},{key:"unmounted",value:function(){}},{key:"updated",value:function(){}}]),t}();ComponentManager.init();